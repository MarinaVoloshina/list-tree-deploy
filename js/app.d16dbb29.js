(function(){"use strict";var t={8146:function(t,e,i){var s=i(9242),n=i(3396);const o={class:"layout"},r={class:"panel left"},l={class:"panel right"};function a(t,e,i,s,a,d){const c=(0,n.up)("ItemsTree"),u=(0,n.up)("ItemsInventory");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",r,[(0,n.Wm)(c,{data:t.data},null,8,["data"])]),(0,n._)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,((t,e)=>((0,n.wg)(),(0,n.j4)(u,{model:t,key:e},null,8,["model"])))),128))])])}var d=i(7327);const c=(t=0,e=10)=>{const i=Math.random(),s=i*(e-t+1),n=Math.floor(s);return n+t},u=()=>{const t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),i=Math.floor(256*Math.random()),s=t.toString(16).padStart(2,"0"),n=e.toString(16).padStart(2,"0"),o=i.toString(16).padStart(2,"0");return`#${s}${n}${o}`};class h{constructor(t){(0,d.Z)(this,"id",void 0),(0,d.Z)(this,"checked",void 0),(0,d.Z)(this,"title",void 0),(0,d.Z)(this,"color",void 0),this.id=t.id,this.checked=t.checked,this.title=t.title,this.color=t.color}}class p{constructor(t){(0,d.Z)(this,"id",void 0),(0,d.Z)(this,"typeId",void 0),this.id=t.id,this.typeId=t.typeId}}var m;(function(t){t[t["FALSE"]=0]="FALSE",t[t["INDETERMINATE"]=1]="INDETERMINATE",t[t["TRUE"]=2]="TRUE"})(m||(m={}));class y{constructor(t){(0,d.Z)(this,"name",void 0),(0,d.Z)(this,"types",[]),(0,d.Z)(this,"items",[]),(0,d.Z)(this,"itemIdCounter",0),(0,d.Z)(this,"isItemsSorted",!0),this.name=t,this.initialilizeItemTypes(),this.initializeItems()}getTypeById(t){return this.types.find((e=>e.id===t))}changeTypeColor(t,e){const i=this.types.findIndex((e=>e.id===t));this.types[i].color=e}toggleType(t){const e=this.types.findIndex((e=>e.id===t));this.types[e].checked=!this.types[e].checked}toggleIsSorted(){this.isItemsSorted?this.shuffleItems():this.sortItems()}sortItems(){this.items=this.items.sort(((t,e)=>t.typeId-e.typeId)),this.isItemsSorted=!0}shuffleItems(){const{items:t}=this;for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}this.items=t,this.isItemsSorted=!1}changeQuantityOfItemsByType(t,e){const i=this.items.filter((e=>e.typeId===t)).length;if(e>i){for(let s=0;s<e-i;s++){this.itemIdCounter++;const e=new p({id:this.itemIdCounter,typeId:t}),i=this.isItemsSorted?this.items.findIndex((e=>e.typeId===t)):c(0,(this.items.length||1)-1);this.items.splice(i,0,e)}this.isItemsSorted&&this.sortItems()}else for(let s=0;s<i-e;s++){const e=this.items.findIndex((e=>e.typeId===t));this.items.splice(e,1)}}initialilizeItemTypes(){this.types=new Array(c(4,10)).fill(null),this.types=this.types.map(((t,e)=>new h({id:e+1,checked:!!c(0,1),title:"Item "+(e+1),color:u()})))}initializeItems(){this.types.forEach((t=>{this.changeQuantityOfItemsByType(t.id,c(0,25))}))}get itemsByType(){return this.types.map((t=>({...t,quantity:this.items.filter((e=>e.typeId===t.id)).length})))}deleteItem(t){this.items=this.items.filter((e=>e.id!==t))}get itemsWithCheckedType(){const t=this.types.filter((t=>t.checked)).map((t=>t.id));return this.items.filter((e=>t.includes(e.typeId)))}get isChecked(){const t=this.types.length,e=this.types.filter((t=>t.checked)).length;return e?e===t?m.TRUE:m.INDETERMINATE:m.FALSE}toggleIsChecked(){const t=this.isChecked!==m.TRUE;this.setAllTypesChecked(t)}setAllTypesChecked(t){this.types.forEach(((e,i)=>{this.types[i].checked=t}))}}function g(t,e,i,s,o,r){const l=(0,n.up)("TypeList");return(0,n.wg)(),(0,n.iD)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,((t,e)=>((0,n.wg)(),(0,n.j4)(l,{key:e,model:t},null,8,["model"])))),128))])}var f=i(7139);const I={class:"list-setting"},v={class:"type-list__header"},k=["src"],_={class:"title"},T={class:"type-list ul-setting"},w=["checked","onChange"],C={class:"title"},b={class:"type-list__item-right"},x=["value","onInput"];function E(t,e,o,r,l,a){const d=(0,n.up)("TristateCheckbox"),c=(0,n.up)("ColorInput");return(0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("div",v,[(0,n._)("img",{onClick:e[0]||(e[0]=e=>t.isOpened=!t.isOpened),class:"chevron__image",src:i(1454),style:(0,f.j5)(`transform: rotate(${t.isOpened?0:270}deg)`),alt:"expand"},null,12,k),(0,n.Wm)(d,{class:"ml-6",state:t.model.isChecked,onClick:e[1]||(e[1]=e=>t.model.toggleIsChecked())},null,8,["state"]),(0,n._)("p",_,(0,f.zw)(t.model.name),1)]),(0,n.wy)((0,n._)("ul",T,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.model.itemsByType,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.id,class:"type-list__item"},[(0,n._)("div",null,[(0,n._)("input",{type:"checkbox",class:"checkbox",checked:e.checked,onChange:i=>t.model.toggleType(e.id)},null,40,w),(0,n._)("span",C,(0,f.zw)(e.title),1)]),(0,n._)("div",b,[(0,n._)("input",{type:"number",value:e.quantity,min:"0",max:"100",onInput:i=>t.changeQuantityByType(e.id,i),class:"quantity-input"},null,40,x),(0,n.Wm)(c,{"model-value":e.color,"onUpdate:modelValue":i=>t.setTypeColor(e.id,i)},null,8,["model-value","onUpdate:modelValue"])])])))),128))],512),[[s.F8,t.isOpened]])])}function S(t,e,i,o,r,l){return(0,n.wg)(),(0,n.iD)("div",{class:"square",style:(0,f.j5)({backgroundColor:`${t.innerValue}`})},[(0,n.wy)((0,n._)("input",{type:"color","onUpdate:modelValue":e[0]||(e[0]=e=>t.innerValue=e),class:"color-input"},null,512),[[s.nr,t.innerValue]])],4)}var O=(0,n.aZ)({name:"ColorInput",props:{modelValue:{type:String,required:!0}},computed:{innerValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}}),D=i(89);const Z=(0,D.Z)(O,[["render",S],["__scopeId","data-v-1a15540d"]]);var A=Z;const L={class:"toggle-button tristate-checkbox"},M=["src"];function N(t,e,i,s,o,r){return(0,n.wg)(),(0,n.iD)("button",L,[t.state!==t.states.FALSE?((0,n.wg)(),(0,n.iD)("img",{key:0,class:(0,f.C_)(["tristate-checkbox__image",{"tristate-checkbox--svg-fix":t.state===t.states.INDETERMINATE}]),alt:"",src:t.state===t.states.INDETERMINATE?t.imgSrc.intermediate:t.imgSrc.checked},null,10,M)):(0,n.kq)("",!0)])}var j=(0,n.aZ)({name:"TristateCheckbox",props:{state:{type:Object,default:m.FALSE}},data(){return{states:m,imgSrc:{intermediate:i(7236),checked:i(4112)}}}});const q=(0,D.Z)(j,[["render",N],["__scopeId","data-v-771a650d"]]);var R=q,z=(0,n.aZ)({name:"TypeList",components:{TristateCheckbox:R,ColorInput:A},props:{model:{type:Object,required:!0}},data(){return{isOpened:!0}},methods:{changeQuantityByType(t,e){const i=e.target;let s=parseInt(i.value);(Number.isNaN(s)||s<0)&&(s=0,i.value="0"),this.model.changeQuantityOfItemsByType(t,s)},setTypeColor(t,e){this.model.changeTypeColor(t,e)}}});const B=(0,D.Z)(z,[["render",E],["__scopeId","data-v-f8f68268"]]);var F=B,V=(0,n.aZ)({name:"ItemsTree",components:{TypeList:F},props:{data:{type:Array,required:!0}}});const U=(0,D.Z)(V,[["render",g]]);var W=U;const H={class:"list-drawing"},Y={class:"title"},$={class:"drawing-item"},Q=["onClick"],K={key:0,style:{width:"100%",margin:"0 0 10px 0"}};function G(t,e,i,s,o,r){return(0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",Y,(0,f.zw)(t.model.name),1),t.model.itemsWithCheckedType.length>0?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("button",{class:"btn",onClick:e[0]||(e[0]=e=>t.model.toggleIsSorted())},(0,f.zw)(t.changeSortButtonName),1),(0,n._)("div",$,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.model.itemsWithCheckedType,((e,i)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e.id},[(0,n._)("div",{class:"square",style:(0,f.j5)({backgroundColor:t.getTypeColor(e.typeId)}),onClick:i=>t.model.deleteItem(e.id)},null,12,Q),t.model.isItemsSorted&&t.getIndexOfLastOfColor(e.typeId)===i?((0,n.wg)(),(0,n.iD)("div",K)):(0,n.kq)("",!0)],64)))),128))])],64)):(0,n.kq)("",!0)])}var P=(0,n.aZ)({name:"ItemsInventory",props:{model:{type:Object,required:!0}},methods:{getTypeColor(t){return this.model.getTypeById(t).color},getIndexOfLastOfColor(t){const e=this.model.itemsWithCheckedType;for(let i=e.length-1;i>=0;i--)if(e[i].typeId===t)return i;return-1}},computed:{changeSortButtonName(){return this.model.isItemsSorted?"Перемешать":"Сортировать"}}});const J=(0,D.Z)(P,[["render",G],["__scopeId","data-v-eb9849b8"]]);var X=J,tt=(0,n.aZ)({name:"App",components:{ItemsInventory:X,ItemsTree:W},data:()=>({data:new Array(5).fill(null).map(((t,e)=>new y("List "+(e+1))))})});const et=(0,D.Z)(tt,[["render",a]]);var it=et;(0,s.ri)(it).mount("#app")},4112:function(t,e,i){t.exports=i.p+"img/close_FILL0_wght400_GRAD0_opsz48.1056ea7c.svg"},1454:function(t,e,i){t.exports=i.p+"img/expand_more_FILL0_wght400_GRAD0_opsz48.f8344229.svg"},7236:function(t,e,i){t.exports=i.p+"img/square_FILL1_wght400_GRAD0_opsz24.73b1a774.svg"}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,s,n,o){if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],o=t[c][2];for(var l=!0,a=0;a<s.length;a++)(!1&o||r>=o)&&Object.keys(i.O).every((function(t){return i.O[t](s[a])}))?s.splice(a--,1):(l=!1,o<r&&(r=o));if(l){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,n,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="/"}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var n,o,r=s[0],l=s[1],a=s[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(a)var c=a(i)}for(e&&e(s);d<r.length;d++)o=r[d],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self["webpackChunklist_items"]=self["webpackChunklist_items"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(8146)}));s=i.O(s)})();
//# sourceMappingURL=app.d16dbb29.js.map